<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Manipula archivos PDF directamente en tu navegador - combina, divide, comprime, rota y convierte JPG a PDF">
  <title>IHATEPDF - Herramientas PDF en línea</title>
  
  <!-- Estilos -->
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/responsive.css">
  
  <!-- Fuente Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header class="header">
      <h1 class="header__title">IHATEPDF</h1>
      <p class="header__subtitle">Herramientas PDF del lado del cliente</p>
    </header>

    <!-- Main Content -->
    <main class="main">
      <!-- Operation Selector -->
      <section class="operation-selector" aria-label="Seleccionar operación">
        <h2 class="visually-hidden">Operaciones disponibles</h2>
        <div class="operation-selector__buttons">
          <button 
            type="button" 
            class="operation-btn" 
            data-operation="combine"
            aria-pressed="false">
            Combinar
          </button>
          <button 
            type="button" 
            class="operation-btn" 
            data-operation="split"
            aria-pressed="false">
            Dividir
          </button>
          <button 
            type="button" 
            class="operation-btn" 
            data-operation="compress"
            aria-pressed="false">
            Comprimir
          </button>
          <button 
            type="button" 
            class="operation-btn" 
            data-operation="rotate"
            aria-pressed="false">
            Rotar
          </button>
          <button 
            type="button" 
            class="operation-btn" 
            data-operation="jpg-to-pdf"
            aria-pressed="false">
            JPG→PDF
          </button>
          <button 
            type="button" 
            class="operation-btn" 
            data-operation="png-to-pdf"
            aria-pressed="false">
            PNG→PDF
          </button>
          <button 
            type="button" 
            class="operation-btn" 
            data-operation="images-to-pdf"
            aria-pressed="false">
            IMG→PDF
          </button>
          <button 
            type="button" 
            class="operation-btn" 
            data-operation="add-page-numbers"
            aria-pressed="false">
            Numerar
          </button>
          <button 
            type="button" 
            class="operation-btn" 
            data-operation="add-watermark"
            aria-pressed="false">
            Marca de agua
          </button>
        </div>
      </section>

      <!-- File Upload Area -->
      <section class="file-upload" aria-label="Cargar archivos">
        <div 
          class="file-upload__dropzone" 
          id="dropzone"
          role="button"
          tabindex="0"
          aria-label="Arrastra archivos aquí o haz clic para seleccionar">
          <svg class="file-upload__icon" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="17 8 12 3 7 8"></polyline>
            <line x1="12" y1="3" x2="12" y2="15"></line>
          </svg>
          <p class="file-upload__text">
            Arrastra archivos aquí<br>
            <span class="file-upload__text--secondary">o haz clic para seleccionar</span>
          </p>
          <input 
            type="file" 
            id="fileInput" 
            class="file-upload__input" 
            multiple
            accept=".pdf,.jpg,.jpeg,.png"
            aria-label="Seleccionar archivos">
        </div>
      </section>

      <!-- Operation-specific Controls -->
      <section class="operation-controls" id="operationControls" aria-label="Controles de operación">
        <!-- Split Controls -->
        <div class="control-group" id="splitControls" hidden>
          <div class="split-info" id="splitInfo">
            <p class="split-info__text">Carga un PDF para ver las opciones de división</p>
          </div>
          
          <div class="split-options" id="splitOptions" hidden>
            <h3 class="split-options__title">¿Cómo quieres dividir el PDF?</h3>
            
            <div class="split-mode">
              <button type="button" class="split-mode__btn" data-mode="pages" id="splitByPages">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="18" height="18" rx="2"/>
                  <line x1="9" y1="3" x2="9" y2="21"/>
                  <line x1="15" y1="3" x2="15" y2="21"/>
                </svg>
                <span>Dividir cada N páginas</span>
              </button>
              
              <button type="button" class="split-mode__btn" data-mode="ranges" id="splitByRanges">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="7" height="18" rx="1"/>
                  <rect x="14" y="3" width="7" height="18" rx="1"/>
                </svg>
                <span>Seleccionar rangos específicos</span>
              </button>
            </div>
            
            <!-- Dividir cada N páginas -->
            <div class="split-config" id="splitConfigPages" hidden>
              <label for="pagesPerSplit" class="control-group__label">
                Dividir cada cuántas páginas:
              </label>
              <div class="number-input">
                <button type="button" class="number-input__btn" id="decreasePages">-</button>
                <input 
                  type="number" 
                  id="pagesPerSplit" 
                  class="number-input__field"
                  value="1"
                  min="1"
                  max="999">
                <button type="button" class="number-input__btn" id="increasePages">+</button>
              </div>
              <small class="control-group__help" id="splitPagesPreview">
                Esto creará X archivos
              </small>
            </div>
            
            <!-- Seleccionar rangos -->
            <div class="split-config" id="splitConfigRanges" hidden>
              <div class="ranges-builder">
                <div class="ranges-builder__header">
                  <label class="control-group__label">Rangos de páginas:</label>
                  <button type="button" class="btn-add-range" id="addRange">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <line x1="12" y1="5" x2="12" y2="19"/>
                      <line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                    Agregar rango
                  </button>
                </div>
                <div class="ranges-list" id="rangesList">
                  <!-- Ranges will be added here dynamically -->
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Rotate Controls -->
        <div class="control-group" id="rotateControls" hidden>
          <label for="pageSelection" class="control-group__label">
            Páginas a rotar (ej: 1, 3, 5-7)
          </label>
          <input 
            type="text" 
            id="pageSelection" 
            class="control-group__input"
            placeholder="1, 3, 5-7"
            aria-describedby="pageSelectionHelp">
          <small id="pageSelectionHelp" class="control-group__help">
            Especifica las páginas separadas por comas
          </small>
          
          <label for="rotationAngle" class="control-group__label">
            Ángulo de rotación
          </label>
          <select id="rotationAngle" class="control-group__select">
            <option value="90">90° (derecha)</option>
            <option value="180">180° (invertir)</option>
            <option value="270">270° (izquierda)</option>
          </select>
        </div>

        <!-- Page Numbers Controls -->
        <div class="control-group" id="pageNumbersControls" hidden>
          <label for="pageNumberPosition" class="control-group__label">
            Posición de los números
          </label>
          <select id="pageNumberPosition" class="control-group__select">
            <option value="bottom-right">Abajo derecha</option>
            <option value="bottom-left">Abajo izquierda</option>
            <option value="bottom-center">Abajo centro</option>
            <option value="top-right">Arriba derecha</option>
            <option value="top-left">Arriba izquierda</option>
            <option value="top-center">Arriba centro</option>
          </select>
          
          <label for="pageNumberFormat" class="control-group__label">
            Formato
          </label>
          <select id="pageNumberFormat" class="control-group__select">
            <option value="number">Solo número (1, 2, 3...)</option>
            <option value="page-of-total">Página de total (1 de 10)</option>
          </select>
          
          <label for="pageNumberFontSize" class="control-group__label">
            Tamaño de fuente
          </label>
          <div class="number-input">
            <button type="button" class="number-input__btn" id="decreaseFontSize">-</button>
            <input 
              type="number" 
              id="pageNumberFontSize" 
              class="number-input__field"
              value="12"
              min="8"
              max="24">
            <button type="button" class="number-input__btn" id="increaseFontSize">+</button>
          </div>
          
          <label for="startPageNumber" class="control-group__label">
            Empezar desde la página
          </label>
          <div class="number-input">
            <button type="button" class="number-input__btn" id="decreaseStartPage">-</button>
            <input 
              type="number" 
              id="startPageNumber" 
              class="number-input__field"
              value="1"
              min="1"
              max="999">
            <button type="button" class="number-input__btn" id="increaseStartPage">+</button>
          </div>
        </div>

        <!-- Watermark Controls -->
        <div class="control-group" id="watermarkControls" hidden>
          <label for="watermarkText" class="control-group__label">
            Texto de la marca de agua
          </label>
          <input 
            type="text" 
            id="watermarkText" 
            class="control-group__input"
            placeholder="CONFIDENCIAL"
            maxlength="50">
          
          <label for="watermarkPosition" class="control-group__label">
            Posición
          </label>
          <select id="watermarkPosition" class="control-group__select">
            <option value="diagonal">Diagonal (45°)</option>
            <option value="center">Centro horizontal</option>
          </select>
          
          <label for="watermarkOpacity" class="control-group__label">
            Opacidad
          </label>
          <div class="range-input">
            <input 
              type="range" 
              id="watermarkOpacity" 
              class="range-input__slider"
              min="0.1"
              max="1"
              step="0.1"
              value="0.3">
            <span class="range-input__value" id="opacityValue">30%</span>
          </div>
          
          <label for="watermarkFontSize" class="control-group__label">
            Tamaño de fuente
          </label>
          <div class="number-input">
            <button type="button" class="number-input__btn" id="decreaseWatermarkSize">-</button>
            <input 
              type="number" 
              id="watermarkFontSize" 
              class="number-input__field"
              value="50"
              min="20"
              max="100">
            <button type="button" class="number-input__btn" id="increaseWatermarkSize">+</button>
          </div>
          
          <label for="watermarkColor" class="control-group__label">
            Color
          </label>
          <div class="color-input">
            <input 
              type="color" 
              id="watermarkColor" 
              class="color-input__picker"
              value="#000000">
            <span class="color-input__label">Negro</span>
          </div>
        </div>
      </section>

      <!-- File Preview List -->
      <section class="file-preview" id="filePreview" aria-label="Archivos cargados">
        <h2 class="file-preview__title">Archivos seleccionados</h2>
        <ul class="file-preview__list" id="fileList" role="list">
          <!-- File items will be inserted here dynamically -->
        </ul>
      </section>

      <!-- Process Button -->
      <section class="action-section">
        <button 
          type="button" 
          id="processBtn" 
          class="btn btn--primary btn--large"
          disabled
          aria-label="Procesar archivos">
          Procesar
        </button>
      </section>

      <!-- Download Options (will be inserted here by DownloadOptions component) -->
      <section class="download-section" id="downloadSection">
        <!-- DownloadOptions component will be inserted here -->
      </section>

      <!-- Progress Indicator -->
      <div class="progress-indicator" id="progressIndicator" hidden aria-live="polite">
        <div class="progress-indicator__spinner"></div>
        <p class="progress-indicator__message" id="progressMessage">Procesando...</p>
      </div>

      <!-- Notification Banner -->
      <div 
        class="notification" 
        id="notification" 
        role="alert" 
        aria-live="assertive"
        hidden>
        <p class="notification__message" id="notificationMessage"></p>
        <button 
          type="button" 
          class="notification__close" 
          aria-label="Cerrar notificación">
          ×
        </button>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <p class="footer__text">
        Todos los archivos se procesan localmente en tu navegador. 
        No se envían datos a ningún servidor.
      </p>
    </footer>
  </div>

  <!-- Scripts -->
  <script type="module" src="js/app.js"></script>
</body>
</html>
